<template name="activity">

	{{#contentFor "headerButtonLeft"}}
	    {{>ionNavBackButton}}
	    <!-- {{>ionNavBackButton path="activityList" text="Back"}} -->
	{{/contentFor}}

	<!-- Re-added the logic to check user -->
	<!-- Commented out the logic to check if the user is the owner of the activity -->
	<!-- {{#if noHost}} -->
		
	<!-- {{/if}} -->

	{{#contentFor 'headerTitle'}}
		<h1 class="title">{{type}}</h1>
	{{/contentFor}}

	{{#ionView }}
		{{#ionContent class='padding activityDetail'}}
			{{#ionList class="card"}}
				{{#ionItem avatar=true class='header'}}
					<img class="activity_img" src="{{getUserPicUrl}}">
					<h1>{{type}} </h1>
					{{> ionIcon icon="android-bicycle" class="activityIcon"}}

					<p>with <span>{{host.name}}</span></p>

				{{/ionItem}}



				<!-- Date time Details -->
				{{#ionItem body=true class='details'}}
					<div>
						{{>ionIcon icon="ios-calendar-outline"}}
						{{prettifyDate time.date}}
					</div>
					<div>
						{{>ionIcon icon="ios-clock-outline"}}
						{{time.time}} for {{duration}} hrs
					</div>

				{{/ionItem}}

				<!-- Location Details -->
				{{#if location}}
					{{#ionItem body=true class="activityLocation"}}
						<div class="info">
							{{> ionIcon icon='ios-location'}}  {{location.name}}
						</div>
						<img src="/img/RSF.png" class="locationMap">
					{{/ionItem}}
				{{/if}}

				<!-- Tagalongs Information-->
				{{#ionItem body=true class="activityTagalongs"}}
					{{#if tagalongs}}
						<p>
							<strong>{{friendCount}}</strong> tagging along with <strong>{{host.name}}</strong>
						</p>
						<div>
							{{#each taggers}}
								<img class="tinyPic" src="/img/{{names.first}}.jpg">
							{{/each}}
						</div>
						<!-- <div>{{friendCount}} tagging along with {{host.name}}</div>
				 		{{#each tagalongs}}
							<div>{{this}}</div>
						{{/each}} -->
					{{/if}}
				{{/ionItem}}

				<!-- Messages Section-->
				{{#ionItem body=true class="activityTagalongs"}}
					<div>Comments</div>
				{{/ionItem}}

			{{/ionList}}
			
		{{/ionContent}}
		{{#unless activityMember}}
			<div id="activity-join" class="tagalong">Tagalong!</div>
		{{else}}
			<div id="activity-join" class="message">Message myself</div>
			{{#if notHost}}
				<!-- Adds the EDIT button to the header -->
				{{#contentFor "headerButtonRight"}}
				    <button id="activity-edit" class="button button-clear" data-ion-modal="activityEdit" data-id="{{this._id}}">
				    	Edit
				    </button>
				{{/contentFor}}	
			{{/if}}
		{{/unless}}

	{{/ionView}}
</template>