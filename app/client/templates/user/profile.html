<template name="profile">
	{{#ionView}}
		{{#contentFor 'headerTitle'}}
			<h1 class="title">My Profile</h1>

			<button id="user-preferences-edit" class="button button-clear pull-right" data-ion-modal="userPreferences">
				  {{> ionIcon icon="ios-gear-outline"}} 
			</button>
		{{/contentFor}}

		{{#ionContent class=' userProfile'}}
			{{#with userPreferences}}
				{{#ionItem class='header'}}
					<img class="userPic" src="{{this.profile.names.pic}}">
					<h2>{{this.profile.names.first}} {{this.profile.names.last}}</h2>

					<p><span>{{emailAddress this.emails}}</span></p>
					

				{{/ionItem}}

				{{#ionItem class="body profileMenu"}}
					<ul>
						<li class='{{#if getProfileSectionSelection "History"}}selected{{/if}}'>History</li>
						<li class='{{#if getProfileSectionSelection "Friends"}}selected{{/if}}'>Friends</li>
						<li class='{{#if getProfileSectionSelection "Preferences"}}selected{{/if}}'>Preferences</li>
					</ul>
				{{/ionItem}}

				{{#if getProfileSectionSelection 'History'}}
					{{#ionItem class='body stats'}}
						{{> currentStreak }}
					{{/ionItem}}
				{{else}}
					{{#if getProfileSectionSelection 'Preferences'}}
						{{#ionItem class="body preferences"}}
							<div class="activityTypes">	
								<h5 class="listSubHeader">
									Activities you like
									<!-- <button id="user-preferences-edit" class="button button-clear pull-right" data-ion-modal="userPreferences">Edit</button>  -->
								</h5>
								{{#if this.activities }}
									{{> activities}}
								{{else}}
									<div class="emptyPref">
										<p>You have no activities selected.<br>Add some!</p>
										<button id="user-preferences-edit" class="button button-stable" data-ion-modal="userPreferences">{{> ionIcon icon="ios-gear-outline"}} Edit Preferences</button> 
									</div>
								{{/if}}
								<!-- <div>
									{{ inActivities "Walking"}}
										<img src="/icons/walking.svg" activity="Walking" class='activityIcon selected'>
									{{/if}}

									{{ inActivities "Running"}}
										<img src="/icons/running.svg" activity="Running" class='activityIcon selected'>
									{{/if}}
									
									{{ inActivities "Hiking"}}
										<img src="/icons/hiking.svg" activity="Hiking" class='activityIcon selected'>
									{{/if}}

									{{ inActivities "Swimming"}}
										<img src="/icons/swimming.svg" activity="Swimming" class='activityIcon selected'>
									{{/if}}

									{{ inActivities "Cycling"}}
										<img src="/icons/cycling.svg" activity="Cycling" class='activityIcon selected'>
									{{/if}}

									{{ inActivities "Gym"}}
										<img src="/icons/gym.svg" activity="Gym" class='activityIcon selected'>
									{{/if}}

									{{ inActivities "Meditation"}}
										<img src="/icons/meditation.svg" class='activityIcon selected' activity="Meditation">
									{{/if}}

									{{ inActivities "Soccer"}}
										<img src="/icons/soccer.svg" activity="Soccer" class='activityIcon selected'>
									{{/if}}
								</div> -->
							</div>
						{{/ionItem}}
					{{else}}
						{{#ionItem class="body friends"}}
							<h5 class="listSubHeader">Your friends on Tagalong</h5>
							{{#each getFriends}}
								<li>
									<img class="tinyPic" src="{{this.profile.names.pic}}"><span class="userNames">{{this.profile.names.first}} {{this.profile.names.last}}</span>
								</li>
							{{/each}}
						{{/ionItem}}
					{{/if}}
				{{/if}}

			{{/with}}
		{{/ionContent}}
	{{/ionView}}

</template>